<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <!--  
    Un template standalone:
    - `id` es tu xmlid interno.
    - `t-name` debe coincidir exactamente con el atributo `name` de tu <report>.
  -->
  <template id="report_stock_transfer_charge_template" 
            t-name="stock_transfer_charge_report.stock_transfer_charge_report_template">
    <!-- Llamamos al layout estándar de Odoo -->
    <t t-call="web.html_container">
      <t t-call="web.external_layout">
        <!-- Iteramos sobre los pickings seleccionados -->
        <t t-foreach="docs" t-as="o">
          <main class="page">
            <h2 style="text-align: center;">
              Cargos entre Talleres — <small><t t-esc="o.name"/></small>
            </h2>

            <!-- Tabla de cargos agrupados -->
            <t t-if="charge_lines">
              <table class="table table-sm mt16">
                <thead>
                  <tr>
                    <th>Mes</th>
                    <th>Origen</th>
                    <th>Destino</th>
                    <th class="text-right">Total (CLP)</th>
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="charge_lines" t-as="c">
                    <tr>
                      <td><t t-esc="c['month']"/></td>
                      <td><t t-esc="c['origin']"/></td>
                      <td><t t-esc="c['dest']"/></td>
                      <td class="text-right"><t t-esc="'%.2f' % c['amount']"/></td>
                    </tr>
                  </t>
                </tbody>
              </table>
            </t>
            <!-- Si no hay cargos, mensaje -->
            <t t-if="not charge_lines">
              <p class="text-center"><em>No hay cargos para mostrar en este picking.</em></p>
            </t>
          </main>
        </t>
      </t>
    </t>
  </template>
</odoo>
